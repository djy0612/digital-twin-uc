[[1;34mINFO[m] Scanning for projects...
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m------------< [0;36morg.hepeng:hyperledger-fabric-app-java-demo[0;1m >-------------[m
[[1;34mINFO[m] [1mBuilding hyperledger-fabric-app-java-demo 0.0.1-SNAPSHOT[m
[[1;34mINFO[m] [1m--------------------------------[ jar ]---------------------------------[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m>>> [0;32mspring-boot-maven-plugin:2.7.18:run[m [1m(default-cli)[0;1m > [0;1mtest-compile[m @ [36mhyperledger-fabric-app-java-demo[0;1m >>>[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mhyperledger-fabric-app-java-demo[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 119 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.11.0:compile[m [1m(default-compile)[m @ [36mhyperledger-fabric-app-java-demo[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mhyperledger-fabric-app-java-demo[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] skip non existing resourceDirectory /home/djy/digital-twin-uc/blockchain-connect/src/test/resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.11.0:testCompile[m [1m(default-testCompile)[m @ [36mhyperledger-fabric-app-java-demo[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m<<< [0;32mspring-boot-maven-plugin:2.7.18:run[m [1m(default-cli)[0;1m < [0;1mtest-compile[m @ [36mhyperledger-fabric-app-java-demo[0;1m <<<[m
[[1;34mINFO[m] 
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mspring-boot-maven-plugin:2.7.18:run[m [1m(default-cli)[m @ [36mhyperledger-fabric-app-java-demo[0;1m ---[m
[[1;34mINFO[m] Attaching agents: []
10:48:56.827 [Thread-0] DEBUG org.springframework.boot.devtools.restart.classloader.RestartClassLoader - Created RestartClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1b274ab

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v2.7.18)

2025-02-24 10:48:57.120  INFO 673815 --- [  restartedMain] .HyperledgerFabricAppJavaDemoApplication : Starting HyperledgerFabricAppJavaDemoApplication using Java 17.0.12 on djy-virtual-machine with PID 673815 (/home/djy/digital-twin-uc/blockchain-connect/target/classes started by djy in /home/djy/digital-twin-uc/blockchain-connect)
2025-02-24 10:48:57.121  INFO 673815 --- [  restartedMain] .HyperledgerFabricAppJavaDemoApplication : No active profile set, falling back to 1 default profile: "default"
2025-02-24 10:48:57.200  INFO 673815 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in /home/djy/.m2/repository/com/sun/xml/bind/jaxb-impl/4.0.5/jaxb-impl-4.0.5.jar referenced one or more files that do not exist: file:/home/djy/.m2/repository/com/sun/xml/bind/jaxb-impl/4.0.5/jaxb-core.jar,file:/home/djy/.m2/repository/com/sun/xml/bind/jaxb-impl/4.0.5/angus-activation.jar
2025-02-24 10:48:57.201  INFO 673815 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in /home/djy/.m2/repository/com/sun/xml/bind/jaxb-core/4.0.5/jaxb-core-4.0.5.jar referenced one or more files that do not exist: file:/home/djy/.m2/repository/com/sun/xml/bind/jaxb-core/4.0.5/jakarta.activation-api.jar,file:/home/djy/.m2/repository/com/sun/xml/bind/jaxb-core/4.0.5/jakarta.xml.bind-api.jar
2025-02-24 10:48:57.201  INFO 673815 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-24 10:48:57.202  INFO 673815 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-24 10:48:58.475  INFO 673815 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2025-02-24 10:48:58.484  INFO 673815 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-02-24 10:48:58.484  INFO 673815 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-02-24 10:48:58.562  INFO 673815 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-02-24 10:48:58.563  INFO 673815 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1361 ms
2025-02-24 10:48:58.765  WARN 673815 --- [  restartedMain] o.hyperledger.fabric.sdk.helper.Config   : Failed to load any configuration from: config.properties. Using toolkit defaults
2025-02-24 10:48:59.025  INFO 673815 --- [  restartedMain] o.d.h.a.j.HyperLedgerFabricGatewayConfig : =========================================== connected fabric gateway org.hyperledger.fabric.gateway.impl.GatewayImpl@9fb1c78 
2025-02-24 10:48:59.765  INFO 673815 --- [  restartedMain] org.hyperledger.fabric.sdk.Channel       : Channel Channel{id: 1, name: businesschannel} eventThread started shutdown: false  thread: null 
2025-02-24 10:49:00.250  INFO 673815 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-02-24 10:49:00.274  INFO 673815 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2025-02-24 10:49:00.289  INFO 673815 --- [  restartedMain] .HyperledgerFabricAppJavaDemoApplication : Started HyperledgerFabricAppJavaDemoApplication in 3.453 seconds (JVM running for 3.811)
2025-02-24 10:49:20.695  INFO 673815 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-24 10:49:20.696  INFO 673815 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-02-24 10:49:20.697  INFO 673815 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-02-24 10:49:20.727  INFO 673815 --- [nio-8080-exec-1] o.d.h.a.j.controller.PolicyController    : Received policy content: <?xml version="1.0" encoding="UTF-8"?>
<Policy xml
2025-02-24 10:49:23.042  INFO 673815 --- [nio-8080-exec-1] o.d.h.a.j.controller.PolicyController    : Chaincode result: [{"id":"6f2c9cb3-25fe-407c-99d5-a9cdf8a38625","name":"UploadedPolicy","content":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cPolicy xmlns=\"urn:oasis:names:tc:xacml:3.0:core:schema:wd-17\" \n        PolicyId=\"BasicAccessPolicy\" \n        RuleCombiningAlgId=\"urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:permit-overrides\" \n        Version=\"1.0\"\u003e\n\n    \u003c!-- 策略目标：匹配请求中的资源、用户和操作 --\u003e\n    \u003cTarget\u003e\n        \u003cAnyOf\u003e\n            \u003cAllOf\u003e\n                \u003c!-- 资源匹配 --\u003e\n                \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                    \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eresource1\u003c/AttributeValue\u003e\n                    \u003cAttributeDesignator \n                        AttributeId=\"urn:oasis:names:tc:xacml:1.0:resource:resource-id\" \n                        Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" \n                        DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                        MustBePresent=\"true\"/\u003e\n                \u003c/Match\u003e\n            \u003c/AllOf\u003e\n        \u003c/AnyOf\u003e\n    \u003c/Target\u003e\n\n    \u003c!-- 规则1：允许 user1 的读取操作 --\u003e\n    \u003cRule RuleId=\"permit-read-resource1\" Effect=\"Permit\"\u003e\n        \u003cTarget\u003e\n            \u003cAnyOf\u003e\n                \u003cAllOf\u003e\n                    \u003c!-- 用户匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003euser1\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:subject:subject-id\" \n                            Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                    \u003c!-- 操作匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eread\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:action:action-id\" \n                            Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:action\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                \u003c/AllOf\u003e\n            \u003c/AnyOf\u003e\n        \u003c/Target\u003e\n        \u003cDescription\u003e允许 user1 读取 resource1\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n    \u003c!-- 规则2：默认拒绝其他所有请求 --\u003e\n    \u003cRule RuleId=\"deny-other-requests\" Effect=\"Deny\"\u003e\n        \u003cDescription\u003e拒绝未明确允许的请求\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n\u003c/Policy\u003e\n","version":"1.0","status":"active","createdAt":"2025-02-24T02:49:20.728794344Z","updatedAt":"2025-02-24T02:49:20.728794344Z","createdBy":"eDUwOTo6Q049VXNlcjFAb3JnMS5leGFtcGxlLmNvbSxPVT1jbGllbnQsTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUzo6Q049Y2Eub3JnMS5leGFtcGxlLmNvbSxPPW9yZzEuZXhhbXBsZS5jb20sTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUw=="}]
2025-02-24 10:49:23.108  INFO 673815 --- [nio-8080-exec-1] o.d.h.a.j.controller.PolicyController    : Policy uploaded successfully with ID: 6f2c9cb3-25fe-407c-99d5-a9cdf8a38625
2025-02-24 10:49:23.206  INFO 673815 --- [nio-8080-exec-3] o.d.h.a.j.controller.PolicyController    : Evaluating policy with ID: 6f2c9cb3-25fe-407c-99d5-a9cdf8a38625, request content: <Request xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17"
         CombinedDecision="false"
         ReturnPolicyIdList="false">

    <!-- 用户属性 -->
    <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
        <Attribute 
            AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" 
            IncludeInResult="false">  <!-- 添加此行 -->
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">user1</AttributeValue>
        </Attribute>
        <Attribute AttributeId="policyId" IncludeInResult="false">
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">6f2c9cb3-25fe-407c-99d5-a9cdf8a38625</AttributeValue>
        </Attribute>
    </Attributes>

    <!-- 资源属性 -->
    <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
        <Attribute 
            AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
            IncludeInResult="false">  <!-- 添加此行 -->
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">resource1</AttributeValue>
        </Attribute>
    </Attributes>

    <!-- 操作属性 -->
    <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
        <Attribute 
            AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
            IncludeInResult="false">  <!-- 添加此行 -->
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">read</AttributeValue>
        </Attribute>
    </Attributes>
</Request>

2025-02-24 10:49:23.275  INFO 673815 --- [nio-8080-exec-4] o.d.h.a.j.controller.PolicyController    : getPolicyresult result: [{"id":"6f2c9cb3-25fe-407c-99d5-a9cdf8a38625","name":"UploadedPolicy","content":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cPolicy xmlns=\"urn:oasis:names:tc:xacml:3.0:core:schema:wd-17\" \n        PolicyId=\"BasicAccessPolicy\" \n        RuleCombiningAlgId=\"urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:permit-overrides\" \n        Version=\"1.0\"\u003e\n\n    \u003c!-- 策略目标：匹配请求中的资源、用户和操作 --\u003e\n    \u003cTarget\u003e\n        \u003cAnyOf\u003e\n            \u003cAllOf\u003e\n                \u003c!-- 资源匹配 --\u003e\n                \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                    \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eresource1\u003c/AttributeValue\u003e\n                    \u003cAttributeDesignator \n                        AttributeId=\"urn:oasis:names:tc:xacml:1.0:resource:resource-id\" \n                        Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" \n                        DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                        MustBePresent=\"true\"/\u003e\n                \u003c/Match\u003e\n            \u003c/AllOf\u003e\n        \u003c/AnyOf\u003e\n    \u003c/Target\u003e\n\n    \u003c!-- 规则1：允许 user1 的读取操作 --\u003e\n    \u003cRule RuleId=\"permit-read-resource1\" Effect=\"Permit\"\u003e\n        \u003cTarget\u003e\n            \u003cAnyOf\u003e\n                \u003cAllOf\u003e\n                    \u003c!-- 用户匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003euser1\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:subject:subject-id\" \n                            Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                    \u003c!-- 操作匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eread\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:action:action-id\" \n                            Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:action\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                \u003c/AllOf\u003e\n            \u003c/AnyOf\u003e\n        \u003c/Target\u003e\n        \u003cDescription\u003e允许 user1 读取 resource1\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n    \u003c!-- 规则2：默认拒绝其他所有请求 --\u003e\n    \u003cRule RuleId=\"deny-other-requests\" Effect=\"Deny\"\u003e\n        \u003cDescription\u003e拒绝未明确允许的请求\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n\u003c/Policy\u003e\n","version":"1.0","status":"active","createdAt":"2025-02-24T02:49:20.728794344Z","updatedAt":"2025-02-24T02:49:20.728794344Z","createdBy":"eDUwOTo6Q049VXNlcjFAb3JnMS5leGFtcGxlLmNvbSxPVT1jbGllbnQsTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUzo6Q049Y2Eub3JnMS5leGFtcGxlLmNvbSxPPW9yZzEuZXhhbXBsZS5jb20sTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUw=="}]
2025-02-24 10:49:23.276  INFO 673815 --- [nio-8080-exec-4] o.d.h.a.j.controller.PolicyController    : Chaincode result: [{"id":"6f2c9cb3-25fe-407c-99d5-a9cdf8a38625","name":"UploadedPolicy","content":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cPolicy xmlns=\"urn:oasis:names:tc:xacml:3.0:core:schema:wd-17\" \n        PolicyId=\"BasicAccessPolicy\" \n        RuleCombiningAlgId=\"urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:permit-overrides\" \n        Version=\"1.0\"\u003e\n\n    \u003c!-- 策略目标：匹配请求中的资源、用户和操作 --\u003e\n    \u003cTarget\u003e\n        \u003cAnyOf\u003e\n            \u003cAllOf\u003e\n                \u003c!-- 资源匹配 --\u003e\n                \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                    \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eresource1\u003c/AttributeValue\u003e\n                    \u003cAttributeDesignator \n                        AttributeId=\"urn:oasis:names:tc:xacml:1.0:resource:resource-id\" \n                        Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" \n                        DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                        MustBePresent=\"true\"/\u003e\n                \u003c/Match\u003e\n            \u003c/AllOf\u003e\n        \u003c/AnyOf\u003e\n    \u003c/Target\u003e\n\n    \u003c!-- 规则1：允许 user1 的读取操作 --\u003e\n    \u003cRule RuleId=\"permit-read-resource1\" Effect=\"Permit\"\u003e\n        \u003cTarget\u003e\n            \u003cAnyOf\u003e\n                \u003cAllOf\u003e\n                    \u003c!-- 用户匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003euser1\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:subject:subject-id\" \n                            Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                    \u003c!-- 操作匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eread\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:action:action-id\" \n                            Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:action\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                \u003c/AllOf\u003e\n            \u003c/AnyOf\u003e\n        \u003c/Target\u003e\n        \u003cDescription\u003e允许 user1 读取 resource1\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n    \u003c!-- 规则2：默认拒绝其他所有请求 --\u003e\n    \u003cRule RuleId=\"deny-other-requests\" Effect=\"Deny\"\u003e\n        \u003cDescription\u003e拒绝未明确允许的请求\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n\u003c/Policy\u003e\n","version":"1.0","status":"active","createdAt":"2025-02-24T02:49:20.728794344Z","updatedAt":"2025-02-24T02:49:20.728794344Z","createdBy":"eDUwOTo6Q049VXNlcjFAb3JnMS5leGFtcGxlLmNvbSxPVT1jbGllbnQsTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUzo6Q049Y2Eub3JnMS5leGFtcGxlLmNvbSxPPW9yZzEuZXhhbXBsZS5jb20sTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUw=="}]
2025-02-24 10:49:23.280  INFO 673815 --- [nio-8080-exec-2] o.d.h.a.j.controller.PolicyController    : getPolicyresult result: [{"id":"6f2c9cb3-25fe-407c-99d5-a9cdf8a38625","name":"UploadedPolicy","content":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cPolicy xmlns=\"urn:oasis:names:tc:xacml:3.0:core:schema:wd-17\" \n        PolicyId=\"BasicAccessPolicy\" \n        RuleCombiningAlgId=\"urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:permit-overrides\" \n        Version=\"1.0\"\u003e\n\n    \u003c!-- 策略目标：匹配请求中的资源、用户和操作 --\u003e\n    \u003cTarget\u003e\n        \u003cAnyOf\u003e\n            \u003cAllOf\u003e\n                \u003c!-- 资源匹配 --\u003e\n                \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                    \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eresource1\u003c/AttributeValue\u003e\n                    \u003cAttributeDesignator \n                        AttributeId=\"urn:oasis:names:tc:xacml:1.0:resource:resource-id\" \n                        Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" \n                        DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                        MustBePresent=\"true\"/\u003e\n                \u003c/Match\u003e\n            \u003c/AllOf\u003e\n        \u003c/AnyOf\u003e\n    \u003c/Target\u003e\n\n    \u003c!-- 规则1：允许 user1 的读取操作 --\u003e\n    \u003cRule RuleId=\"permit-read-resource1\" Effect=\"Permit\"\u003e\n        \u003cTarget\u003e\n            \u003cAnyOf\u003e\n                \u003cAllOf\u003e\n                    \u003c!-- 用户匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003euser1\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:subject:subject-id\" \n                            Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                    \u003c!-- 操作匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eread\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:action:action-id\" \n                            Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:action\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                \u003c/AllOf\u003e\n            \u003c/AnyOf\u003e\n        \u003c/Target\u003e\n        \u003cDescription\u003e允许 user1 读取 resource1\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n    \u003c!-- 规则2：默认拒绝其他所有请求 --\u003e\n    \u003cRule RuleId=\"deny-other-requests\" Effect=\"Deny\"\u003e\n        \u003cDescription\u003e拒绝未明确允许的请求\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n\u003c/Policy\u003e\n","version":"1.0","status":"active","createdAt":"2025-02-24T02:49:20.728794344Z","updatedAt":"2025-02-24T02:49:20.728794344Z","createdBy":"eDUwOTo6Q049VXNlcjFAb3JnMS5leGFtcGxlLmNvbSxPVT1jbGllbnQsTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUzo6Q049Y2Eub3JnMS5leGFtcGxlLmNvbSxPPW9yZzEuZXhhbXBsZS5jb20sTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUw=="}]
2025-02-24 10:49:23.281  INFO 673815 --- [nio-8080-exec-2] o.d.h.a.j.controller.PolicyController    : Chaincode result: [{"id":"6f2c9cb3-25fe-407c-99d5-a9cdf8a38625","name":"UploadedPolicy","content":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003cPolicy xmlns=\"urn:oasis:names:tc:xacml:3.0:core:schema:wd-17\" \n        PolicyId=\"BasicAccessPolicy\" \n        RuleCombiningAlgId=\"urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:permit-overrides\" \n        Version=\"1.0\"\u003e\n\n    \u003c!-- 策略目标：匹配请求中的资源、用户和操作 --\u003e\n    \u003cTarget\u003e\n        \u003cAnyOf\u003e\n            \u003cAllOf\u003e\n                \u003c!-- 资源匹配 --\u003e\n                \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                    \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eresource1\u003c/AttributeValue\u003e\n                    \u003cAttributeDesignator \n                        AttributeId=\"urn:oasis:names:tc:xacml:1.0:resource:resource-id\" \n                        Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" \n                        DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                        MustBePresent=\"true\"/\u003e\n                \u003c/Match\u003e\n            \u003c/AllOf\u003e\n        \u003c/AnyOf\u003e\n    \u003c/Target\u003e\n\n    \u003c!-- 规则1：允许 user1 的读取操作 --\u003e\n    \u003cRule RuleId=\"permit-read-resource1\" Effect=\"Permit\"\u003e\n        \u003cTarget\u003e\n            \u003cAnyOf\u003e\n                \u003cAllOf\u003e\n                    \u003c!-- 用户匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003euser1\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:subject:subject-id\" \n                            Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                    \u003c!-- 操作匹配 --\u003e\n                    \u003cMatch MatchId=\"urn:oasis:names:tc:xacml:1.0:function:string-equal\"\u003e\n                        \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eread\u003c/AttributeValue\u003e\n                        \u003cAttributeDesignator \n                            AttributeId=\"urn:oasis:names:tc:xacml:1.0:action:action-id\" \n                            Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:action\" \n                            DataType=\"http://www.w3.org/2001/XMLSchema#string\" \n                            MustBePresent=\"true\"/\u003e\n                    \u003c/Match\u003e\n                \u003c/AllOf\u003e\n            \u003c/AnyOf\u003e\n        \u003c/Target\u003e\n        \u003cDescription\u003e允许 user1 读取 resource1\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n    \u003c!-- 规则2：默认拒绝其他所有请求 --\u003e\n    \u003cRule RuleId=\"deny-other-requests\" Effect=\"Deny\"\u003e\n        \u003cDescription\u003e拒绝未明确允许的请求\u003c/Description\u003e\n    \u003c/Rule\u003e\n\n\u003c/Policy\u003e\n","version":"1.0","status":"active","createdAt":"2025-02-24T02:49:20.728794344Z","updatedAt":"2025-02-24T02:49:20.728794344Z","createdBy":"eDUwOTo6Q049VXNlcjFAb3JnMS5leGFtcGxlLmNvbSxPVT1jbGllbnQsTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUzo6Q049Y2Eub3JnMS5leGFtcGxlLmNvbSxPPW9yZzEuZXhhbXBsZS5jb20sTD1TYW4gRnJhbmNpc2NvLFNUPUNhbGlmb3JuaWEsQz1VUw=="}]
2025-02-24 10:49:25.510  INFO 673815 --- [nio-8080-exec-3] o.d.h.a.j.controller.PolicyController    : Chaincode result: {"requestId":"req_1740365363","policyId":"6f2c9cb3-25fe-407c-99d5-a9cdf8a38625","decision":"Permit","timestamp":"2025-02-24T02:49:23.207195515Z","requestContent":"\u003cRequest xmlns=\"urn:oasis:names:tc:xacml:3.0:core:schema:wd-17\"\n         CombinedDecision=\"false\"\n         ReturnPolicyIdList=\"false\"\u003e\n\n    \u003c!-- 用户属性 --\u003e\n    \u003cAttributes Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\"\u003e\n        \u003cAttribute \n            AttributeId=\"urn:oasis:names:tc:xacml:1.0:subject:subject-id\" \n            IncludeInResult=\"false\"\u003e  \u003c!-- 添加此行 --\u003e\n            \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003euser1\u003c/AttributeValue\u003e\n        \u003c/Attribute\u003e\n        \u003cAttribute AttributeId=\"policyId\" IncludeInResult=\"false\"\u003e\n            \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003e6f2c9cb3-25fe-407c-99d5-a9cdf8a38625\u003c/AttributeValue\u003e\n        \u003c/Attribute\u003e\n    \u003c/Attributes\u003e\n\n    \u003c!-- 资源属性 --\u003e\n    \u003cAttributes Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\"\u003e\n        \u003cAttribute \n            AttributeId=\"urn:oasis:names:tc:xacml:1.0:resource:resource-id\"\n            IncludeInResult=\"false\"\u003e  \u003c!-- 添加此行 --\u003e\n            \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eresource1\u003c/AttributeValue\u003e\n        \u003c/Attribute\u003e\n    \u003c/Attributes\u003e\n\n    \u003c!-- 操作属性 --\u003e\n    \u003cAttributes Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:action\"\u003e\n        \u003cAttribute \n            AttributeId=\"urn:oasis:names:tc:xacml:1.0:action:action-id\"\n            IncludeInResult=\"false\"\u003e  \u003c!-- 添加此行 --\u003e\n            \u003cAttributeValue DataType=\"http://www.w3.org/2001/XMLSchema#string\"\u003eread\u003c/AttributeValue\u003e\n        \u003c/Attribute\u003e\n    \u003c/Attributes\u003e\n\u003c/Request\u003e\n","responseContent":"\u003cResponse xmlns=\"urn:oasis:names:tc:xacml:3.0:core:schema:wd-17\"\u003e\u003cResult\u003e\u003cDecision\u003ePermit\u003c/Decision\u003e\u003cStatus\u003e\u003cStatusCode Value=\"urn:oasis:names:tc:xacml:1.0:status:ok\"/\u003e\u003c/Status\u003e\u003c/Result\u003e\u003c/Response\u003e"}
2025-02-24 10:49:25.514  INFO 673815 --- [nio-8080-exec-3] o.d.h.a.j.controller.PolicyController    : Chaincode evaluation result: PolicyDecision(requestId=req_1740365363, policyId=6f2c9cb3-25fe-407c-99d5-a9cdf8a38625, policyVersion=null, decision=Permit, responseContent=<Response xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17"><Result><Decision>Permit</Decision><Status><StatusCode Value="urn:oasis:names:tc:xacml:1.0:status:ok"/></Status></Result></Response>, requestContent=<Request xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17"
         CombinedDecision="false"
         ReturnPolicyIdList="false">

    <!-- 用户属性 -->
    <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
        <Attribute 
            AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" 
            IncludeInResult="false">  <!-- 添加此行 -->
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">user1</AttributeValue>
        </Attribute>
        <Attribute AttributeId="policyId" IncludeInResult="false">
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">6f2c9cb3-25fe-407c-99d5-a9cdf8a38625</AttributeValue>
        </Attribute>
    </Attributes>

    <!-- 资源属性 -->
    <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
        <Attribute 
            AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
            IncludeInResult="false">  <!-- 添加此行 -->
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">resource1</AttributeValue>
        </Attribute>
    </Attributes>

    <!-- 操作属性 -->
    <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
        <Attribute 
            AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
            IncludeInResult="false">  <!-- 添加此行 -->
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">read</AttributeValue>
        </Attribute>
    </Attributes>
</Request>
, timestamp=2025-02-24T02:49:23.207195515Z)
